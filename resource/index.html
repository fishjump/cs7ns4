<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Urban Computing assignment 4</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"></script>
  </head>
 <body> <div id="main" style="margin: 8px; min-height: 500px;"></div> <script type="text/javascript"> const urlSearchParams = new URLSearchParams(window.location.search); const params = Object.fromEntries(urlSearchParams.entries());var myChart = echarts.init(document.getElementById("main")); var option;$.getJSON("https://uc.superfish.me/db/query?username="+params.username, function (data) { myChart.setOption( (option = { title: { text: "Air quality index around the user", left: "1%" }, tooltip: { trigger: "axis" }, grid: { left: "5%", right: "15%", bottom: "10%" }, xAxis: { data: data.data.map(function (item) { var date = new Date(item.timestamp * 1000); return date.toUTCString(); }) }, yAxis: {}, toolbox: { right: 10, feature: { dataZoom: { yAxisIndex: "none" }, restore: {}, saveAsImage: {} } }, dataZoom: [ { startValue: "" }, { type: "inside" } ], visualMap: { top: 50, right: 10, pieces: [ { gt: 0, lte: 20, color: "#93CE07" }, { gt: 20, lte: 40, color: "#FBDB0F" }, { gt: 40, lte: 60, color: "#FC7D02" }, { gt: 60, lte: 80, color: "#FD0100" }, { gt: 80, lte: 100, color: "#AA069F" }, { gt: 100, color: "#AC3B2A" } ], outOfRange: { color: "#999" } }, series: { name: "Air quality index around the user", type: "line", data: data.data.map(function (item) { return item["air-quality-index"]; }), markLine: { silent: true, lineStyle: { color: "#333" }, data: [ { yAxis: 20 }, { yAxis: 40 }, { yAxis: 60 }, { yAxis: 80 }, { yAxis: 100 } ] } } }) );});option && myChart.setOption(option); </script> </body></html>